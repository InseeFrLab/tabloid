<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Masquer une partie du contenu du tableau • tabloid</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Masquer une partie du contenu du tableau">
<meta property="og:description" content="tabloid">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tabloid</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Contenu du package</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/aa_presentation_package.html">Présentation du package</a>
    </li>
    <li>
      <a href="../articles/bb_creer_tableau_croise.html">Construire un tableau croisé</a>
    </li>
    <li>
      <a href="../articles/cc_calculer_profil_ligne_colonne.html">Calculer un profil ligne ou colonne</a>
    </li>
    <li>
      <a href="../articles/dd_arrondir_tableau.html">Gérer les arrondis d'un tableau croisé</a>
    </li>
    <li>
      <a href="../articles/ee_masquer_partie_contenu_tableau.html">Masquer une partie du contenu du tableau</a>
    </li>
    <li>
      <a href="../articles/ff_afficher_joli_tableau_html.html">Afficher un tableau mis en forme</a>
    </li>
    <li>
      <a href="../articles/gg_exporter_joli_tableau_xlsx.html">Exporter le tableau dans un classeur</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://gitlab.insee.fr/espace-charges-etudes/boite-outils/tableaux" class="external-link">
    <span class="fa fa-gitlab"></span>
     
    Code source
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ee_masquer_partie_contenu_tableau_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Masquer une partie du contenu du tableau</h1>
            
      
      
      <div class="hidden name"><code>ee_masquer_partie_contenu_tableau.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="description-rapide">Description rapide<a class="anchor" aria-label="anchor" href="#description-rapide"></a>
</h2>
<p><code><a href="../reference/tab_mask.html">tab_mask()</a></code> est une des fonctions de customisation du contenu d’un tableau proposée par le package <code>tabloid</code>.</p>
<p>Elle permet de blanchir les cellules concernant trop peu d’observations, ou de masquer les lignes ou colonnes correspondant aux totaux.</p>
<p>Elle prend en entrée un objet tab et rendent un autre objet tab transformé. Elle doit prendre place après une instruction <code><a href="../reference/tab_build.html">tab_build()</a></code> (et éventuellement <code><a href="../reference/tab_pct.html">tab_pct()</a></code>), mais peut intervenir avant ou après la fonction <code><a href="../reference/tab_round.html">tab_round()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="utilisation-de-la-fonction">Utilisation de la fonction<a class="anchor" aria-label="anchor" href="#utilisation-de-la-fonction"></a>
</h2>
<div class="section level3">
<h3 id="masquer-des-cellules-dans-le-coeur-du-tableau">Masquer des cellules dans le coeur du tableau<a class="anchor" aria-label="anchor" href="#masquer-des-cellules-dans-le-coeur-du-tableau"></a>
</h3>
<p>Remarque : les cellules qui prennent une valeur nulle car elles ne concernent aucune ligne de la table de données initiale, ne sont jamais masquées.</p>
<div class="section level4">
<h4 id="threshold_count">threshold_count<a class="anchor" aria-label="anchor" href="#threshold_count"></a>
</h4>
<p>Cette fonctionnalité remplacera certaines cellules par des <code>NA</code> lorsque le nombre de lignes sous-jacent dans la table de données initiale est strictement inférieur à l’entier <code>threshold_count</code> (autrement dit, seuil de comptage).</p>
<p>Attention, la bonne utilisation de cette fonction demande parfois de bien connaître la structure de sa table initiale (à quoi correspond une ligne). Cf exemple 1 plus bas.</p>
</div>
<div class="section level4">
<h4 id="threshold_sum">threshold_sum<a class="anchor" aria-label="anchor" href="#threshold_sum"></a>
</h4>
<p>Ce paramètre n’a de sens que pour stat = “sum”, qu’un pourcentage ligne ou colonne ait ou non été calculé par la suite.</p>
<p>Cette fonctionnalité remplacera certaines cellules par des <code>NA</code> lorsque la valeur sous-jacente de la cellule (qui est une somme) est strictement inférieure à la valeur <code>threshold_sum</code> (autrement dit, seuil de somme).</p>
<p>Si l’utilisateur renseigne ce paramètre sans que la statistique demandée dans <code><a href="../reference/tab_build.html">tab_build()</a></code> soit une somme, une erreur sera renvoyée à l’utilisateur.</p>
</div>
</div>
<div class="section level3">
<h3 id="masquer-des-marges">Masquer des marges<a class="anchor" aria-label="anchor" href="#masquer-des-marges"></a>
</h3>
<p>Pour rappel, la fonction <code><a href="../reference/tab_build.html">tab_build()</a></code> calcule d’office les marges, intermédiaires et totales.</p>
<p>Or, dans certains cas, l’utilisateur peut ne pas avoir envie de considérer ces marges, c’est-à-dire les lignes ou colonnes correspondant aux totaux, intermédiaires ou non. Par exemple, si on a fait un filtre sur la table initiale pour ne représenter les données que de certaines régions, cet ensemble n’a pas de signification en tant que tel.</p>
<p>Dans ce cas, l’utilisateur peut demander à supprimer les lignes afférentes (<code>mask_total = "rows"</code>), les colonnes afférentes (<code>mask_total = "cols"</code>) ou les deux (<code>mask_total = c("rows", "cols")</code>).</p>
<p>Ces options ne permettent pas de masquer une partie seulement des marges, par exemple les marges intermédiaires et pas les marges totales, ou inversement. Pour ce type de besoin plus spécifique, il est conseillé d’exporter le tableau via la fonction <code><a href="../reference/tab_xlsx.html">tab_xlsx()</a></code> et de le retravailler via un tableur.</p>
</div>
<div class="section level3">
<h3 id="articulation-des-différentes-options">Articulation des différentes options<a class="anchor" aria-label="anchor" href="#articulation-des-diff%C3%A9rentes-options"></a>
</h3>
<p>Toutes les options de la fonction peuvent s’utiliser seules ou combinées.</p>
<p>L’option <code>verbose = TRUE</code> permet à l’utilisateur de savoir combien de cellules ont été masquées, pour <code>threshold_count</code> d’une part et pour <code>threshold_sum</code> d’autre part. Cette option est à TRUE par défaut.</p>
<p>Attention cependant, les messages indiqués par cette option dénombre l’ensemble des cellules masquées, marges comprises, même si celles-ci sont masquées ensuite.</p>
</div>
<div class="section level3">
<h3 id="exemples">Exemples<a class="anchor" aria-label="anchor" href="#exemples"></a>
</h3>
<div class="section level4">
<h4 id="exemple-1">Exemple 1<a class="anchor" aria-label="anchor" href="#exemple-1"></a>
</h4>
<p>Le code ci-dessous compte le nombre de naissances d’enfants prénommés Charlie ou Camille en 2020, par sexe, pour deux régions, et demande à masquer les cellules pour lesquelles, soit le prénom est donné dans moins de 5 départements (threshold_count = 5, sachant que dans la table initiale une ligne correspond à un croisement annais * prenom * sexe * département), soit le prénom est donné moins de 100 fois en tout (threshold_sum = 100 sachant que l’on a demandé de calculer une somme de la variable “nombre”).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prenoms_mixtes</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">prenom</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Charlie"</span>, <span class="st">"Camille"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="../reference/tab_build.html">tab_build</a></span><span class="op">(</span>var_rows <span class="op">=</span> <span class="va">lib_reg</span>,</span>
<span>           var_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">prenom</span>, <span class="va">sexe</span><span class="op">)</span>,</span>
<span>           var_stat <span class="op">=</span> <span class="va">nombre</span>,</span>
<span>           lab_total <span class="op">=</span> <span class="st">"Total"</span>,</span>
<span>           stat <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="../reference/tab_mask.html">tab_mask</a></span><span class="op">(</span>threshold_count <span class="op">=</span> <span class="fl">5</span>,</span>
<span>          threshold_sum <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/ex_mask.png"></p>
</div>
<div class="section level4">
<h4 id="exemple-2">Exemple 2<a class="anchor" aria-label="anchor" href="#exemple-2"></a>
</h4>
<p>Le code ci-dessous compte le nombre de naissances d’enfants prénommés Charlie ou Camille en 2020, par sexe, pour deux régions, et demande à masquer les marges lignes et colonnes. En effet, l’utilisateur a pu souhaiter faire ces comptages pour un besoin particulier, mais les ensembles {Pays de la Loire + Occitanie} ou {Charlie + Camille} n’ont pas de significations en tant que tels et nuiraient à la pertinence du tableau.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prenoms_mixtes</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">prenom</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Charlie"</span>, <span class="st">"Camille"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="../reference/tab_build.html">tab_build</a></span><span class="op">(</span>var_rows <span class="op">=</span> <span class="va">lib_reg</span>,</span>
<span>           var_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">prenom</span>, <span class="va">sexe</span><span class="op">)</span>,</span>
<span>           var_stat <span class="op">=</span> <span class="va">nombre</span>,</span>
<span>           lab_total <span class="op">=</span> <span class="st">"Total"</span>,</span>
<span>           stat <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_mask.html">tab_mask</a></span><span class="op">(</span>mask_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="st">"cols"</span><span class="op">)</span>,</span>
<span>           verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/ex_mask2.png"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="liens-vers-les-autres-vignettes">Liens vers les autres vignettes<a class="anchor" aria-label="anchor" href="#liens-vers-les-autres-vignettes"></a>
</h2>
<p>Les vignettes suivantes présentent plus en détail l’utilisation des différentes fonctions :</p>
<ul>
<li><a href="http://espace-charges-etudes.gitlab-pages.insee.fr/boite-outils/tableaux/articles/bb_creer_tableau_croise.html" class="external-link">tab_build() : construire un tableau croisé</a></li>
<li><a href="http://espace-charges-etudes.gitlab-pages.insee.fr/boite-outils/tableaux/articles/cc_calculer_profil_ligne_colonne.html" class="external-link">tab_pct() : calculer un profil ligne ou colonne</a></li>
<li><a href="http://espace-charges-etudes.gitlab-pages.insee.fr/boite-outils/tableaux/articles/dd_arrondir_tableau.html" class="external-link">tab_round() : gérer les arrondis d’un tableau croisé</a></li>
<li><a href="http://espace-charges-etudes.gitlab-pages.insee.fr/boite-outils/tableaux/articles/ff_afficher_joli_tableau_html.html" class="external-link">tab_render() : afficher un tableau mis en forme</a></li>
<li><a href="http://espace-charges-etudes.gitlab-pages.insee.fr/boite-outils/tableaux/articles/gg_exporter_joli_tableau_xlsx.html" class="external-link">tab_xlsx() : exporter un tableau dans un classeur xlsx</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Maëlle Fontaine, Laurette Cretin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
